@model IEnumerable<AttenceProject.Models.SysAlternative>

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
    <link href="~/Content/icon.css" rel="stylesheet" />
    <link href="~/Content/wu.css" rel="stylesheet" />
    <script src="~/easyui/jquery.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="~/easyui/jquery.easyui.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="~/scripts/easyui-lang-zh_CN.js"></script>
    <link rel="stylesheet" type="text/css" href="~/easyui/themes/default/easyui.css" />
    <script type="text/javascript">
	/**
	* Name 载入菜单树
	*/
	$('#wu-category-tree').tree({
		url:'temp/menu.php',
		onClick:function(node){
			alert(node.text);
		}
	});

	/**
	* Name 添加记录
	*/
	function add(){
		$('#wu-form').form('submit', {
			url:'',
			success:function(data){
				if(data){
					$.messager.alert('信息提示','提交成功！','info');
					$('#wu-dialog').dialog('close');
				}
				else
				{
					$.messager.alert('信息提示','提交失败！','info');
				}
			}
		});
	}

	/**
	* Name 修改记录
	*/
	function edit(){
		$('#wu-form').form('submit', {
			url:'',
			success:function(data){
				if(data){
					$.messager.alert('信息提示','提交成功！','info');
					$('#wu-dialog').dialog('close');
				}
				else
				{
					$.messager.alert('信息提示','提交失败！','info');
				}
			}
		});
	}

	/**
	* Name 删除记录
	*/
	function remove(){
		$.messager.confirm('信息提示','确定要删除该记录？', function(result){
			if(result){
				var items = $('#wu-datagrid').datagrid('getSelections');
				var ids = [];
				$(items).each(function(){
					ids.push(this.productid);
				});
				//alert(ids);return;
				$.ajax({
					url:'',
					data:'',
					success:function(data){
						if(data){
							$.messager.alert('信息提示','删除成功！','info');
						}
						else
						{
							$.messager.alert('信息提示','删除失败！','info');
						}
					}
				});
			}
		});
	}

	/**
	* Name 打开添加窗口
	*/
	function openAdd(){
		$('#wu-form').form('clear');
		$('#wu-dialog').dialog({
			closed: false,
			modal:true,
            title: "添加信息",
            buttons: [{
                text: '确定',
                iconCls: 'icon-ok',
                handler: add
            }, {
                text: '取消',
                iconCls: 'icon-cancel',
                handler: function () {
                    $('#wu-dialog').dialog('close');
                }
            }]
        });
	}

	/**
	* Name 打开修改窗口
	*/
	function openEdit(){
	    $('#wu-form').form('clear');
	    var row = $('#wu-datagrid').datagrid('getSelected');
	    if (row) {
	        var id = row.ID;
	        $.ajax({
	            url: '../../SysAlternatives/GetInfo',
	            data: { id: id },
	            async:false,
	            success: function (data) {
                    data.to
	                var altext=data.split("_")[0];
	                var algtext = data.split("_")[1];
	                var remarks = data.split("_")[2];
	                alert(remarks);
	                $('#wu-form').form('load',{
	                    AlternativeText:altext,
	                    AlternativeGroupText:algtext,
	                    Remarks:remarks
	                });
	                }
	            
	        });
	        $('#wu-dialog').dialog({
	            closed: false,
	            modal: true,
	            title: "修改信息",
	            buttons: [{
	                text: '确定',
	                iconCls: 'icon-ok',
	                handler: edit
	            }, {
	                text: '取消',
	                iconCls: 'icon-cancel',
	                handler: function () {
	                    $('#wu-dialog').dialog('close');
	                }
	            }]
	        });
	    }
		
	}
	
    </script>


</head>

<body>
   
    <div class="easyui-layout" data-options="fit:true">
        <div data-options="region:'center',border:false">
            <!-- Begin of toolbar -->
            <div id="wu-toolbar" class="datagrid-toolbar">
                <div class="wu-toolbar-button">
                    <a href="#" class="easyui-linkbutton" iconCls="icon-add" onclick="openAdd()" plain="true">@Html.ActionLink("添加", "Create")
</a>
                    <a href="#" class="easyui-linkbutton" iconCls="icon-edit" onclick="openEdit()" plain="true">修改</a>
                    <a href="#" class="easyui-linkbutton" iconCls="icon-remove" onclick="remove()" plain="true">删除</a>
                    
                </div>
                <div class="wu-toolbar-search">
                    <label>备选项分组：</label>
                    <select class="easyui-combobox" panelHeight="auto" style="width:100px"> 
                        <option value="0">选择用户组</option>
                        
                    </select>
                    <label>关键词：</label><input class="wu-text" style="width:100px">
                    <a href="#" class="easyui-linkbutton" iconCls="icon-search">开始检索</a>
                </div>
            </div>
            <!-- End of toolbar -->
            <table id="wu-datagrid" class="easyui-datagrid" toolbar="#wu-toolbar" title="Basic DataGrid" style="width:inherit; height:inherit"
                   data-options="singleSelect:true,collapsible:true,url:'../../SysAlternatives/GetJson',pagesize:3,method:'get'"
                    footer= "#foot"  pagination="true" rownumbers="true"  singleselect="true" fitColumns="true">
                <thead>
                    <tr>
                        <th field="ck" checkbox="true"></th>
                        <th data-options="field:'ID',width:80">ID</th>
                        <th data-options="field:'AlternativeText',width:100">AlternativeText</th>
                        <th data-options="field:'AlternativeGroupID',width:80,align:'right'">AlternativeGroupID</th>
                        <th data-options="field:'AlternativeGroupText',width:80,align:'right'">AlternativeGroupText</th>
                        <th data-options="field:'Remarks',width:250">Remarks</th>
                        <th data-options="field:'Operator',width:60,align:'center'">Operator</th>
                    </tr>
                </thead>
            </table>        </div>
    </div>
    <!-- Begin of easyui-dialog -->
    <div id="wu-dialog" class="easyui-dialog" data-options="closed:true,iconCls:'icon-save'" style="width:400px; padding:10px;">
        <form id="wu-form" method="post">
            <table>
                <tr>
                    <td width="60" align="right">备选项名称:</td>
                    <td><input type="text" name="AlternativeText" class="wu-text" /></td>
                </tr>
                <tr>
                    <td align="right">备选项分组:</td>
                    <td><input type="text" name="AlternativeGroupText" class="wu-text" /></td>
                </tr>
                <tr>
                    <td align="right">备选项信息:</td>
                    <td><input type="text" name="Remarks" class="wu-text" /></td>
                </tr>
            </table>
        </form>
    </div>
    <!-- End of easyui-dialog -->
        
</body>
</html>
